import{a as S}from"./-core-load-intersecting.js";import{B as u,a as y}from"./chunk-BaseElement-CopzcQ-j.js";import{d as w,O as I}from"./chunk-debounce-D6ZMjh7U.js";import{W as p}from"./chunk-WithShopifyCart-Bw08p0rZ.js";import{t as h}from"./chunk-custom-element-BhZVzxrc.js";import{x as O}from"./chunk-lit-element-B04JoW0t.js";import{n}from"./chunk-property-Bc0RexEQ.js";import"./chunk-quantity-input-BDeZ0iZt.js";import{f as D}from"./chunk-firstFocusableElement-BqnhZP5g.js";import{H as g}from"./chunk-HTMLUpdateUtility-Hp59CDcg.js";import"./chunk-WithApiClient-mq4vOvoR.js";import"./chunk-index-CKJCYK2x.js";import"./chunk-cart-sections-DQ33OuN-.js";import"./chunk-create-context-89xeped_.js";import"./chunk-tracking-DO2MhGcG.js";import"./chunk-consume-B27YesmA.js";import"./chunk-context-request-event-GdmzvDV-.js";import"./chunk-state-BZNsAlxZ.js";import"./chunk-FormElement-1RsIGsWP.js";import"./chunk-LiveRegionUtility-tvV1eypT.js";import"./chunk-aria-live-region-context-DAmBJh4s.js";var P=Object.getOwnPropertyDescriptor,E=(e,r,a,i)=>{for(var t=i>1?void 0:i?P(r,a):r,o=e.length-1,s;o>=0;o--)(s=e[o])&&(t=s(t)||t);return t};let v=class extends p(u){constructor(){super(),this._handleInput=this._handleInput.bind(this),this._handleInputDebounced=w(this._handleInput,I)}connectedCallback(){super.connectedCallback(),this.addEventListener("input",this._handleInputDebounced)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("input",this._handleInputDebounced)}_handleInput(e){const r=e.target.value;this.updateCartNoteAndAttributes({note:r},{sections:!1})}};v=E([h("cart-note")],v);var $=Object.defineProperty,T=Object.getOwnPropertyDescriptor,m=(e,r,a,i)=>{for(var t=i>1?void 0:i?T(r,a):r,o=e.length-1,s;o>=0;o--)(s=e[o])&&(t=(i?s(r,a,t):s(t))||t);return i&&t&&$(r,a,t),t};let l=class extends p(u){constructor(){super(...arguments),this.variantId="",this.productData="",this.prData="",this.button=null,this.addToCart=async()=>{var r;if(!this.variantId)return;const e=JSON.parse(this.prData||"{}");try{await this.addItemToCart([{id:this.variantId,quantity:1,properties:e}]);const a=window._learnq||[];this.productData!==""&&a.push(["track","Added to Cart",JSON.parse(this.productData)]),location.pathname.endsWith("/cart")?(this.getCartSections(),window.scrollTo({top:0,behavior:"smooth"})):location.href=`${(r=window.Shopify)==null?void 0:r.routes.root}cart`}catch(a){console.error(a)}}}connectedCallback(){super.connectedCallback(),this.button=this.querySelector('[data-action="add-to-cart"]'),this.button&&this.button.addEventListener("click",this.addToCart)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.button)==null||e.removeEventListener("click",this.addToCart)}};m([n({type:String,attribute:"data-id"})],l.prototype,"variantId",2);m([n({type:String,attribute:"product-data"})],l.prototype,"productData",2);m([n({type:String,attribute:"pr-data"})],l.prototype,"prData",2);l=m([h("cart-product-recommendations")],l);var N=Object.defineProperty,U=Object.getOwnPropertyDescriptor,b=(e,r,a,i)=>{for(var t=i>1?void 0:i?U(r,a):r,o=e.length-1,s;o>=0;o--)(s=e[o])&&(t=(i?s(r,a,t):s(t))||t);return i&&t&&N(r,a,t),t};let C=class extends p(y){_handleClick(e){e.preventDefault(),this.index&&this.removeItemFromCart(this.index)}render(){return O` <slot @click=${this._handleClick}></slot> `}};b([n({type:Number})],C.prototype,"index",2);C=b([h("cart-remove-toggle")],C);var x=Object.defineProperty,j=Object.getOwnPropertyDescriptor,f=(e,r,a,i)=>{for(var t=i>1?void 0:i?j(r,a):r,o=e.length-1,s;o>=0;o--)(s=e[o])&&(t=(i?s(r,a,t):s(t))||t);return i&&t&&x(r,a,t),t};let d=class extends p(u){constructor(){super(...arguments),this.variantId="",this.prData="",this.markdownSale="",this.button=null,this.addToCart=async()=>{var r;if(!this.variantId)return;const e=JSON.parse(this.prData||"{}");try{await this.addItemToCart([{id:this.variantId,quantity:1,properties:{...e,...this.markdownSale?{_markdown_sale:!0}:{}}}]),location.pathname.endsWith("/cart")?(this.getCartSections(),window.scrollTo({top:0,behavior:"smooth"})):location.href=`${(r=window.Shopify)==null?void 0:r.routes.root}cart`}catch(a){console.error(a)}}}connectedCallback(){super.connectedCallback(),this.button=this.querySelector('[data-action="add-to-cart"]'),this.button&&this.button.addEventListener("click",this.addToCart)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.button)==null||e.removeEventListener("click",this.addToCart)}};f([n({type:String,attribute:"data-id"})],d.prototype,"variantId",2);f([n({type:String,attribute:"pr-data"})],d.prototype,"prData",2);f([n({type:String,attribute:"data-markdown-sale"})],d.prototype,"markdownSale",2);d=f([h("cart-upsell")],d);var k=Object.defineProperty,q=Object.getOwnPropertyDescriptor,_=(e,r,a,i)=>{for(var t=i>1?void 0:i?q(r,a):r,o=e.length-1,s;o>=0;o--)(s=e[o])&&(t=(i?s(r,a,t):s(t))||t);return i&&t&&k(r,a,t),t};let c=class extends p(u){constructor(){super(...arguments),this.$htmlUpdateUtility=new g(this)}connectedCallback(){super.connectedCallback(),this.$htmlUpdateUtility.addPostProcessCallback(()=>{var e,r;(r=(e=window==null?void 0:window.Shopify)==null?void 0:e.PaymentButton)==null||r.init(),this.lastFocusedElementSelectorId&&setTimeout(()=>{var i;const a=document.querySelector(`#${this.lastFocusedElementSelectorId}`);a?a==null||a.focus():(i=D(this))==null||i.focus(),this.lastFocusedElementSelectorId=null},50)})}updated(){if(this.cartSections[this.sectionId]&&JSON.stringify(this.cartSections[this.sectionId])!==c.SECTIONS_CACHE[this.sectionId]){c.SECTIONS_CACHE[this.sectionId]=JSON.stringify(this.cartSections[this.sectionId]);const e=this.$htmlUpdateUtility.parseSectionStringForSelector(this.cartSections[this.sectionId],`[section-id="${this.sectionId}"]`);if(!e)return;this.$htmlUpdateUtility.replace(this,e,0,!0).then(S)}}};c.SECTIONS_CACHE={};_([n({type:String,attribute:"section-id"})],c.prototype,"sectionId",2);c=_([h("cart-sections")],c);
