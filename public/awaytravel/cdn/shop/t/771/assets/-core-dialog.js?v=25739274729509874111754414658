import{a as x}from"./chunk-BaseElement-CopzcQ-j.js";import{m as M}from"./chunk-modal-context-CA9qKp2P.js";import{c as O}from"./chunk-consume-B27YesmA.js";import{n as s}from"./chunk-property-Bc0RexEQ.js";import{x as h,E as S,a as E}from"./chunk-lit-element-B04JoW0t.js";import{t as $}from"./chunk-custom-element-BhZVzxrc.js";import{e as Y}from"./chunk-base-CShCMygk.js";import{l as z}from"./-core-load-intersecting.js";import{W as B}from"./chunk-WithApiClient-mq4vOvoR.js";import{h as A,i as L}from"./chunk-task-B4U91f5K.js";import{r as _}from"./chunk-query-all-DYFTEN8Z.js";import{r as D}from"./chunk-query-async-BsMZa7Mb.js";import{o as X}from"./chunk-unsafe-html-fDgEVXYA.js";import"./chunk-create-context-89xeped_.js";import"./chunk-context-request-event-GdmzvDV-.js";import"./chunk-index-CKJCYK2x.js";import"./chunk-directive-C_Rw-dL6.js";/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function P(t){return(e,r)=>{const{slot:l,selector:a}={},c="slot"+(l?`[name=${l}]`:":not([name])");return Y(e,r,{get(){var b;const n=(b=this.renderRoot)==null?void 0:b.querySelector(c),g=(n==null?void 0:n.assignedElements(t))??[];return a===void 0?g:g.filter(T=>T.matches(a))}})}}var F=Object.defineProperty,y=(t,e,r,l)=>{for(var a=void 0,c=t.length-1,n;c>=0;c--)(n=t[c])&&(a=n(e,r,a)||a);return a&&F(e,r,a),a};const I=t=>{class e extends t{get currentTargetId(){return this.tagName==="DIALOG-TOGGLE"||this.tagName==="QUICK-SHOP"?this.modalId:this.id}get modalIsOpen(){return!!(this.currentTargetId&&this.modals.includes(this.currentTargetId))}openModal(){!this.currentTargetId||this.modalIsOpen||this.$emit("modal-dialog::open",this.currentTargetId)}closeModal(){!this.currentTargetId||!this.modalIsOpen||this.$emit("modal-dialog::close",this.currentTargetId)}closeAllModals(){this.$emit("modal-dialog::close-all")}}return y([O({context:M,subscribe:!0})],e.prototype,"modals"),y([s({type:String,attribute:"modal-id"})],e.prototype,"modalId"),e};var N=Object.defineProperty,G=Object.getOwnPropertyDescriptor,C=(t,e,r,l)=>{for(var a=l>1?void 0:l?G(e,r):e,c=t.length-1,n;c>=0;c--)(n=t[c])&&(a=(l?n(e,r,a):n(a))||a);return l&&a&&N(e,r,a),a};let w=class extends I(x){onClick(t){this.modalId&&(t.preventDefault(),this.modalIsOpen?this.closeModal():this.openModal())}updated(t){var e;super.updated(t),this.toggleAttribute("open",this.modalIsOpen),(e=this.assignedElements)==null||e.forEach(r=>{r.toggleAttribute("open",this.modalIsOpen),r.setAttribute("aria-expanded",String(this.modalIsOpen))})}render(){return h`<slot @click="${this.onClick}"></slot>`}};C([P()],w.prototype,"assignedElements",2);w=C([$("dialog-toggle")],w);const W=".dialog::backdrop{display:none;transform:translate3d(var(--tw-translate-x),var(--tw-translate-y),0) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:display,opacity,overlay;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-delay:.1s;transition-duration:.3s;transition-behavior:allow-discrete}@media (prefers-reduced-motion: reduce){.dialog::backdrop{transition-property:none}}.dialog[open]:not([is-mobile-menu=true])::backdrop{display:block;opacity:1;transition-delay:0s}.dialog[is-search=true]::backdrop{top:var(--header-height)}@starting-style{.dialog[open]:not([is-mobile-menu=true])::backdrop{opacity:0}}.dialog{position:fixed;top:0;right:0;bottom:0;left:0;margin:0;display:block;height:100dvh;width:100dvw;overflow:hidden;overscroll-behavior:contain;background-color:unset;opacity:1;transition-property:visibility,opacity,display,overlay;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;transition-behavior:allow-discrete}@media (prefers-reduced-motion: reduce){.dialog{transition-property:none}}.dialog{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.dialog:modal{max-height:100dvh;max-width:100vw}@media (min-width: 768px){.dialog[type=modal]{display:flex;align-items:center;justify-content:center}}.dialog:not([open]){pointer-events:none;visibility:hidden;opacity:0;transition-delay:.5s;transition-duration:.7s}.dialog:not([open])::backdrop{opacity:0}.dialog[is-search=true]:not([open]){transition-delay:.1s;transition-duration:.2s}.dialog[is-search=true] .drawer{width:100%}@starting-style{.dialog[open]{opacity:0}}.modal{height:100%;width:100%;--tw-translate-y: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));overflow-y:auto;overscroll-behavior:contain;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));opacity:0;transition-property:opacity,transform,overlay;transition-delay:0s;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1)}@media (prefers-reduced-motion: reduce){.modal{transition-property:none}}@media (min-width: 768px){.modal{height:auto;width:83.333333%;--tw-translate-y: 4rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}}@media (min-width: 1024px){.modal{max-height:100dvh;max-width:42rem}}.modal[size=modal-max]{height:100%!important;max-height:100%!important;width:100%!important;max-width:100%!important}.dialog[open] .modal{transform:none;opacity:1;transition-delay:.1s}.drawer{position:fixed;right:0;height:100%;width:95%;--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));overflow-y:auto;overscroll-behavior:contain;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));transition-property:transform;transition-delay:0s;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.drawer::-webkit-scrollbar-track{background-color:var(--scrollbar-track);border-radius:var(--scrollbar-track-radius)}.drawer::-webkit-scrollbar-track:hover{background-color:var(--scrollbar-track-hover, var(--scrollbar-track))}.drawer::-webkit-scrollbar-track:active{background-color:var(--scrollbar-track-active, var(--scrollbar-track-hover, var(--scrollbar-track)))}.drawer::-webkit-scrollbar-thumb{background-color:var(--scrollbar-thumb);border-radius:var(--scrollbar-thumb-radius)}.drawer::-webkit-scrollbar-thumb:hover{background-color:var(--scrollbar-thumb-hover, var(--scrollbar-thumb))}.drawer::-webkit-scrollbar-thumb:active{background-color:var(--scrollbar-thumb-active, var(--scrollbar-thumb-hover, var(--scrollbar-thumb)))}.drawer::-webkit-scrollbar-corner{background-color:var(--scrollbar-corner);border-radius:var(--scrollbar-corner-radius)}.drawer::-webkit-scrollbar-corner:hover{background-color:var(--scrollbar-corner-hover, var(--scrollbar-corner))}.drawer::-webkit-scrollbar-corner:active{background-color:var(--scrollbar-corner-active, var(--scrollbar-corner-hover, var(--scrollbar-corner)))}.drawer{scrollbar-width:thin;scrollbar-color:var(--scrollbar-thumb, initial) var(--scrollbar-track, initial)}.drawer::-webkit-scrollbar{display:block;width:8px;height:8px}.drawer{--scrollbar-track: transparent;--scrollbar-thumb: #B8B8B8 }@media (prefers-reduced-motion: reduce){.drawer{transition-property:none}}@media (min-width: 640px){.drawer{width:100%;min-width:390px;max-width:28vw}}.drawer[anchor=left]{left:0;right:auto;--tw-translate-x: -100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.dialog:not([open]) .drawer[anchor=right]{--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-delay:0s}.dialog:not([open]) .drawer[anchor=left]{--tw-translate-x: -100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-delay:0s}.drawer[anchor=top]{left:0;right:0;top:var(--header-height);max-width:100%;--tw-translate-y: -100%;--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));grid-template-rows:repeat(1,minmax(0,1fr))}@media (min-width: 640px){.drawer[anchor=top]{max-width:100%}}@media (min-width: 1024px){.drawer[anchor=top]{height:auto;max-height:none}}.dialog:not([open]) .drawer[anchor=top]{--tw-translate-y: -100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transition-delay:0s}.dialog:not([open])[fade-in=true] .drawer{transform:none;transition-delay:0s}.dialog[open] .drawer{transform:none;transition-delay:.1s}[is-airline-modal=true] .drawer{max-width:85vw}@media (min-width: 640px){[is-airline-modal=true] .drawer{max-width:390px}}@media (min-width: 1024px){[is-airline-modal=true] .drawer{max-width:46vw}}dialog:has(psn-provider) .drawer{width:100%;max-width:none}@media (min-width: 768px){dialog:has(psn-provider) .drawer{max-width:85vw}}[is-mobile-menu=true] .drawer{top:var(--header-height);max-height:calc(100dvh - var(--header-height));width:100%;grid-template-rows:repeat(1,minmax(0,1fr))}@media (min-width: 640px){[is-mobile-menu=true] .drawer{top:0;max-height:100%;grid-template-rows:var(--dmn-dialog-header-height, 60px) minmax(0,1fr) auto}.dialog[open][is-mobile-menu=true]::backdrop{display:block;opacity:1;transition-delay:0s}}@starting-style{@media (min-width: 640px){.dialog[open][is-mobile-menu=true]::backdrop{opacity:0}}}[is-mobile-menu] .mobile-menu-header{display:none}@media (min-width: 640px){[is-mobile-menu] .mobile-menu-header{display:flex}}";var q=Object.defineProperty,R=Object.getOwnPropertyDescriptor,i=(t,e,r,l)=>{for(var a=l>1?void 0:l?R(e,r):e,c=t.length-1,n;c>=0;c--)(n=t[c])&&(a=(l?n(e,r,a):n(a))||a);return l&&a&&q(e,r,a),a},v=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},f=(t,e,r)=>(v(t,e,"read from private field"),e.get(t)),k=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},U=(t,e,r,l)=>(v(t,e,"write to private field"),e.set(t,r),r),m=(t,e,r)=>(v(t,e,"access private method"),r),u,d,p;let o=class extends B(I(x)){constructor(){super(...arguments),k(this,d),this.type="modal",this.anchor="right",this.withoutTitle=!1,this.closeOnBackdropClick=!1,this.fadeIn=!1,this.headerClasses="",this.backgroundClasses="",this.closeIconClasses="",this.closeIconFileName="",this.closeIconSize="24",this.isMobileMenu=!1,this.isSearch=!1,this.isAirlineModal=!1,k(this,u,null),this._loadURLContentTask=new A(this,{task:async([t],{signal:e})=>{if(!this.hasToLoadURL)return L;const r=await this.$api.client.fetchClient(t,{method:"GET",signal:e,headers:{"Content-Type":"text/html"}});return e.throwIfAborted(),r},args:()=>[this.url]})}_handleBackdropClick(t){this.closeOnBackdropClick&&t.target instanceof HTMLElement&&t.target.tagName==="DIALOG"&&m(this,d,p).call(this)}_handleGenericClick(t){const e=t.target;e.hasAttribute("close-modal")&&(t.preventDefault(),m(this,d,p).call(this)),e.closest("[close-modal]")&&(t.preventDefault(),m(this,d,p).call(this))}_focusOnFirstElement(){try{setTimeout(()=>{Promise.resolve(this.dialog).then(t=>{if(!t)return;let e=null;if(this.isSearch){const r=this.querySelector("predictive-search");e=(r==null?void 0:r.querySelector('input[type="search"]'))??t.querySelector("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")}else e=t.querySelector("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])");if(e){e.focus();const r=new Touch({identifier:1,target:e,clientX:0,clientY:0,pageX:0,pageY:0,screenX:0,screenY:0,radiusX:0,radiusY:0,rotationAngle:0,force:1}),l=new TouchEvent("touchend",{bubbles:!0,cancelable:!0,touches:[r],targetTouches:[],changedTouches:[r]});e.dispatchEvent(l)}})},300)}catch(t){console.error("Error in _focusOnFirstElement",t)}}async show(){const t=await this.dialog;t&&!t.open&&(U(this,u,document.activeElement),t.showModal(),this._focusOnFirstElement(),this.querySelectorAll("[data-src], [data-srcset]").forEach(z),this.open=!0)}async hide(){const t=await this.dialog;t&&t.open&&(t.close(),this.open=!1),f(this,u)&&f(this,u).focus()}get hasToLoadURL(){const t=this.url;return!(!t||t==="#"||t==="about:blank"||t==="javascript:;"||t==="javascript:void(0)"||t==="")}get dialogContentHTML(){return this.hasToLoadURL?h`
      ${this._loadURLContentTask.render({pending:()=>h`<p class="caption animate-pulse p-md text-center">
            Loading...
          </p>`,complete:t=>t?h`${X(t)}`:S})}
    `:h`<slot @click=${this._handleGenericClick}></slot>`}render(){return h`
      <dialog
        role="dialog"
        aria-modal="true"
        type="${this.type}"
        aria-labelledby="${this.id}-dialogTitle"
        parent-id="${this.id}"
        @modal-close=${m(this,d,p)}
        @close=${m(this,d,p)}
        .inert=${!this.modalIsOpen}
        class="dialog"
        @click=${this._handleBackdropClick}
        is-mobile-menu=${this.isMobileMenu?"true":null}
        is-search=${this.isSearch?"true":null}
        is-airline-modal=${this.isAirlineModal?"true":null}
        fade-in=${this.fadeIn?"true":null}
      >
        <div
          class="${this.type||"modal"} ${this.backgroundClasses} ${this.withoutTitle?"":"grid-rows-[var(--dmn-dialog-header-height,_60px)_minmax(0,_1fr)_auto]"} grid grid-cols-1"
          size=${this.size}
          anchor=${this.anchor}
        >
          ${this.withoutTitle?h`<button
                @click=${m(this,d,p)}
                class="focus-visible:ring-u-focus ${this.isMobileMenu?"hidden":""} absolute right-sm top-sm z-[999] inline-flex leading-none focus:outline-none focus-visible:ring-1"
              >
                <slot name="close-icon">
                  <svg-icon
                    src="${this.closeIconFileName?this.closeIconFileName:"icon-close"}"
                    style="font-size: ${this.closeIconSize}px"
                    class="${this.closeIconClasses}"
                  ></svg-icon>
                  <span class="sr-only">Close</span>
                </slot>
              </button>`:h`<div
                class="${this.headerClasses} sticky top-0 z-50 flex items-center justify-between bg-p-lightest px-sm py-xs"
              >
                <div
                  class="${this.withoutTitle?"sr-only":""} flex-grow"
                  id="${this.id}-dialogTitle"
                >
                  <slot name="header"></slot>
                </div>

                <button
                  @click=${m(this,d,p)}
                  class="focus-visible:ring-u-focus ml-auto inline-flex leading-none focus:outline-none focus-visible:ring-1"
                >
                  <slot name="close-icon">
                    <svg-icon
                      src="${this.closeIconFileName?this.closeIconFileName:"icon-close"}"
                      style="font-size: ${this.closeIconSize}px"
                      class="${this.closeIconClasses}"
                    ></svg-icon>
                    <span class="sr-only">Close</span>
                  </slot>
                </button>
              </div>`}
          <div>${this.dialogContentHTML}</div>
        </div>
      </dialog>
    `}};u=new WeakMap;d=new WeakSet;p=function(){this.closeModal(),this.open=!1};o.styles=[E(W)];i([s({type:Boolean,reflect:!0})],o.prototype,"open",2);i([s({type:String})],o.prototype,"type",2);i([s({type:String,reflect:!0})],o.prototype,"size",2);i([s({type:String})],o.prototype,"anchor",2);i([s({type:Boolean,reflect:!0,attribute:"without-title"})],o.prototype,"withoutTitle",2);i([s({type:Boolean,attribute:"close-on-backdrop-click"})],o.prototype,"closeOnBackdropClick",2);i([s({type:Boolean,attribute:"fade-in"})],o.prototype,"fadeIn",2);i([s({type:String,attribute:"header-classes"})],o.prototype,"headerClasses",2);i([s({type:String,attribute:"background-classes"})],o.prototype,"backgroundClasses",2);i([s({type:String,attribute:"close-icon-classes"})],o.prototype,"closeIconClasses",2);i([s({type:String,attribute:"close-icon-file-name"})],o.prototype,"closeIconFileName",2);i([s({type:String,attribute:"close-icon-size"})],o.prototype,"closeIconSize",2);i([s({type:String,attribute:"url"})],o.prototype,"url",2);i([s({type:Boolean,attribute:"is-mobile-menu",converter:t=>t==="true"})],o.prototype,"isMobileMenu",2);i([s({type:Boolean,attribute:"is-search"})],o.prototype,"isSearch",2);i([s({type:Boolean,attribute:"is-airline-modal"})],o.prototype,"isAirlineModal",2);i([D("dialog")],o.prototype,"dialog",2);i([_("iframe, video")],o.prototype,"iframeOrVideo",2);i([_("[data-src], [data-srcset]")],o.prototype,"lazyImages",2);o=i([$("modal-dialog")],o);
