import{P as h}from"./-psn-consumer.js";import{P as d,a as p}from"./-psn-types.js";import{x as u}from"./chunk-lit-element-B04JoW0t.js";import{t as m}from"./chunk-custom-element-BhZVzxrc.js";import{r as c}from"./chunk-state-BZNsAlxZ.js";import"./-psn-context.js";import"./chunk-create-context-89xeped_.js";import"./chunk-BaseElement-CopzcQ-j.js";import"./chunk-moneyFormatter-CIg0BGM2.js";import"./chunk-WithShopifyCart-Bw08p0rZ.js";import"./chunk-WithApiClient-mq4vOvoR.js";import"./chunk-index-CKJCYK2x.js";import"./chunk-cart-sections-DQ33OuN-.js";import"./chunk-tracking-DO2MhGcG.js";import"./chunk-consume-B27YesmA.js";import"./chunk-context-request-event-GdmzvDV-.js";import"./chunk-property-Bc0RexEQ.js";import"./chunk-ref-7xufm7YO.js";import"./chunk-directive-C_Rw-dL6.js";var f=Object.defineProperty,C=Object.getOwnPropertyDescriptor,n=(t,o,e,r)=>{for(var l=r>1?void 0:r?C(o,e):o,s=t.length-1,i;s>=0;s--)(i=t[s])&&(l=(r?i(o,e,l):i(l))||l);return r&&l&&f(o,e,l),l};let a=class extends h{constructor(){var t;super(...arguments),this.currentStep=d.FontColor,this.colorPickerIsOpen=((t=this.querySelector("[data-color-container]:not(:has([is-shadow-color-toggle]))"))==null?void 0:t.hasAttribute("is-open"))||!1,this.shadowColorPickerIsOpen=!1}connectedCallback(){super.connectedCallback(),this.fontStyleContainers=this.querySelectorAll("[data-style]"),this.psnContext.fontColor&&this.updateColorElements(this.querySelector(`[data-color-label-handleized='${this.psnContext.fontColor}']`)),this.psnContext.shadowColor&&this.updateColorElements(this.querySelector(`[data-color-label-handleized='${this.psnContext.shadowColor}'][is-shadow-color]`))}updated(){var t,o;if(this.isCurrentStep){if(this.psnContext.hasFontStep&&this.handleFontStyles(),this.psnContext.fontColorHex){const e=(t=Array.from(this.fontStyleContainers).find(r=>!r.classList.contains("hidden")))==null?void 0:t.querySelector(`[data-color-label-handleized='${this.psnContext.fontColor}']`);e&&this.updateColorElements(e)}if(this.psnContext.shadowColorHex){const e=(o=Array.from(this.fontStyleContainers).find(r=>!r.classList.contains("hidden")))==null?void 0:o.querySelector(`[data-color-label-handleized='${this.psnContext.shadowColor}'][is-shadow-color]`);e&&this.updateColorElements(e)}}}handleFontStyles(){this.fontStyleContainers.forEach(t=>{t.classList.add("hidden"),t.dataset.style===this.psnContext.fontStyle.toLowerCase()&&t.classList.remove("hidden")})}handleSlotClick(t){const o=t.target;if(o.closest("[data-color-toggle]"))this.handleToggleColorPicker(o);else if(o.closest("[data-color-button]"))this.handleColorChange(o);else return}handleColorChange(t){this.updateColorElements(t),this.$emit(p.FontColorChange,{label:t.dataset.colorLabel,value:t.dataset.colorButton,type:t.hasAttribute("is-shadow-color")?"shadow":"font"})}updateColorElements(t){if(!t)return;const o=t.closest("[data-color-container]");o.querySelectorAll("[data-selected-color]").forEach(s=>s.innerText=t.getAttribute("data-color-label"));const r=o.querySelector("[data-selected-swatch]");r&&(r.style.backgroundColor=t.getAttribute("data-color-button")),o.querySelectorAll("[data-color-button]").forEach(s=>{s.removeAttribute("is-active"),s.getAttribute("data-color-button")===t.getAttribute("data-color-button")&&s.setAttribute("is-active","true")})}handleToggleColorPicker(t){t.hasAttribute("is-shadow-color-toggle")?this.shadowColorPickerIsOpen=!this.shadowColorPickerIsOpen:this.colorPickerIsOpen=!this.colorPickerIsOpen;const o=t.hasAttribute("is-shadow-color-toggle")?this.shadowColorPickerIsOpen:this.colorPickerIsOpen,e=t.closest("[data-color-container]"),r=e.querySelector("[data-color-content]");o?r==null||r.removeAttribute("hidden"):r==null||r.setAttribute("hidden","true"),o?e==null||e.setAttribute("is-open","true"):e==null||e.removeAttribute("is-open"),t==null||t.setAttribute("aria-expanded",o.toString()),t==null||t.setAttribute("aria-label",o?window.strings.psn.collapse_item_colors:window.strings.psn.expand_item_colors)}renderTemplate(){return u` <slot @click=${this.handleSlotClick}></slot> `}};n([c()],a.prototype,"colorPickerIsOpen",2);n([c()],a.prototype,"shadowColorPickerIsOpen",2);a=n([m("psn-font-color")],a);
