var _=Object.defineProperty;var T=(t,e,i)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var E=(t,e,i)=>(T(t,typeof e!="symbol"?e+"":e,i),i),v=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)};var u=(t,e,i)=>(v(t,e,"read from private field"),i?i.call(t):e.get(t)),d=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)};var m=(t,e,i)=>(v(t,e,"access private method"),i);import{B as f}from"./chunk-BaseElement-CopzcQ-j.js";import{l as g}from"./-core-load-intersecting.js";import{t as M}from"./chunk-custom-element-BhZVzxrc.js";import"./chunk-lit-element-B04JoW0t.js";import{r as w}from"./chunk-state-BZNsAlxZ.js";import{r as b}from"./chunk-query-all-DYFTEN8Z.js";import"./chunk-property-Bc0RexEQ.js";import"./chunk-base-CShCMygk.js";const x=t=>{const e=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');return e[e.length-1]};var O=Object.defineProperty,A=Object.getOwnPropertyDescriptor,l=(t,e,i,a)=>{for(var r=a>1?void 0:a?A(e,i):e,h=t.length-1,c;h>=0;h--)(c=t[h])&&(r=(a?c(e,i,r):c(r))||r);return a&&r&&O(e,i,r),r};let n=class extends f{constructor(){super(),this.activeElement=void 0,this._handlePointerEnter=this._handlePointerEnter.bind(this),this._handlePointerOut=this._handlePointerOut.bind(this),this._handleMenuPointerEnter=this._handleMenuPointerEnter.bind(this),this._handleMenuPointerOut=this._handleMenuPointerOut.bind(this),this._handleButtonFocus=this._handleButtonFocus.bind(this),this._handleMenuFocusOut=this._handleMenuFocusOut.bind(this),this.startExitTimer=this.startExitTimer.bind(this),this.stopExitTimer=this.stopExitTimer.bind(this),this.activateMenuWithControl=this.activateMenuWithControl.bind(this)}get ctor(){return this.constructor}connectedCallback(){super.connectedCallback(),Array.from(this.menuTriggers).forEach(t=>{t.addEventListener("pointerover",this._handlePointerEnter),t.addEventListener("pointerout",this._handlePointerOut),t.addEventListener("focus",this._handleButtonFocus)}),Array.from(this.menus).forEach(t=>{var e;t.addEventListener("pointerover",this._handleMenuPointerEnter),t.addEventListener("pointerout",this._handleMenuPointerOut),(e=x(t))==null||e.addEventListener("keydown",this._handleMenuFocusOut)})}_handleActivateButton(t){t.getAttribute("aria-controls")?(this.stopExitTimer(),this.activeElement=t):this.activeElement=void 0}_handleMenuFocusOut(t){t.key==="Tab"&&!t.shiftKey&&this.startExitTimer()}_handlePointerEnter(t){const e=t.currentTarget;this._handleActivateButton(e)}_handlePointerOut(t){const e=t.currentTarget;this.activeElement===e&&this.startExitTimer()}_handleMenuPointerEnter(){this.stopExitTimer()}_handleMenuPointerOut(){this.startExitTimer()}_handleButtonFocus(t){const e=t.currentTarget;this._handleActivateButton(e)}startExitTimer(){this.exitTimer=window.setTimeout(()=>{this.activeElement=void 0},this.ctor.EXIT_TIMEOUT)}stopExitTimer(){this.exitTimer&&window.clearTimeout(this.exitTimer)}updated(t){super.updated(t),t.has("activeElement")&&(this.activateMenuWithControl(this.activeElement),this._handleMenuDrawerARIATags())}activateMenuWithControl(t){for(const e of Array.from(this.menuTriggers))e.getAttribute("aria-controls")&&e===t?e.setAttribute("aria-expanded","true"):e.setAttribute("aria-expanded","false")}_handleMenuDrawerARIATags(){for(const t of Array.from(this.menus)){if(!this.activeElement){t.setAttribute("aria-hidden","true");continue}const e=this.activeElement.getAttribute("aria-controls");t.id===e?(t.setAttribute("aria-hidden","false"),t.querySelectorAll("[data-src], [data-srcset]").forEach(g)):t.setAttribute("aria-hidden","true")}}};n.EXIT_TIMEOUT=300;l([w()],n.prototype,"activeElement",2);l([b("[menu]")],n.prototype,"menus",2);l([b("[menu-trigger]")],n.prototype,"menuTriggers",2);n=l([M("mega-menu")],n);var s,o,p;class P extends f{constructor(){super(...arguments);d(this,o);d(this,s,new ResizeObserver(()=>m(this,o,p).call(this)));E(this,"handleScroll",()=>{this.currentScroll=window.pageYOffset,this.currentScroll!==this.previousScroll&&(window.scrollY==0?this.classList.remove("scroll-down"):this.currentScroll>this.previousScroll&&this.currentScroll>this.clientHeight?this.classList.add("scroll-down"):this.classList.remove("scroll-down"),this.previousScroll=this.currentScroll)})}firstUpdated(i){super.firstUpdated(i),m(this,o,p).call(this),u(this,s).observe(this)}connectedCallback(){super.connectedCallback(),this.previousScroll=window.scrollY,this.currentScroll=window.scrollY,this.scrollInterval=setInterval(()=>{this.handleScroll()},300)}disconnectedCallback(){u(this,s).disconnect(),super.disconnectedCallback(),clearInterval(this.scrollInterval)}}s=new WeakMap,o=new WeakSet,p=function(){const i=this.clientHeight;document.documentElement.style.setProperty("--header-height",`${i}px`)};window.customElements.define("main-header",P);
