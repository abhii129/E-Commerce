import{B as d}from"./chunk-BaseElement-CopzcQ-j.js";import{t as f}from"./chunk-custom-element-BhZVzxrc.js";import{n as p}from"./chunk-property-Bc0RexEQ.js";import{r as m}from"./chunk-state-BZNsAlxZ.js";import{e as a}from"./chunk-query-Cgxy6PDT.js";import{r as h}from"./chunk-query-all-DYFTEN8Z.js";import"./chunk-lit-element-B04JoW0t.js";import"./chunk-base-CShCMygk.js";var u=Object.defineProperty,g=Object.getOwnPropertyDescriptor,n=(t,e,i,r)=>{for(var s=r>1?void 0:r?g(e,i):e,l=t.length-1,c;l>=0;l--)(c=t[l])&&(s=(r?c(e,i,s):c(s))||s);return r&&s&&u(e,i,s),s};const b=150;let o=class extends d{constructor(){super(),this.units="imperial",this.activeSizeFilters=[],this.isMobile=void 0,this.timeout=0,this.frame=0,this.onFrame=()=>{if(!this.isMobile)return;this.stickyMobileHeader.firstElementChild.style.setProperty("transform",`translate3d(${this.mainScrollableContainer.scrollLeft*-1}px, 0, 0)`);const t=this.regularHeader.getBoundingClientRect().bottom,e=this.stickyMobileHeader.getBoundingClientRect().bottom,i=t<=e?"add":"remove";this.stickyMobileHeader.classList[i]("is-visible"),this.frame=window.requestAnimationFrame(this.onFrame)},this.bindEventListeners=this.bindEventListeners.bind(this),this.onResize=this.onResize.bind(this),this.onUnitToggle=this.onUnitToggle.bind(this),this.onDropdownToggle=this.onDropdownToggle.bind(this),this.onSizeFilterChange=this.onSizeFilterChange.bind(this),this.onFilterCloseClick=this.onFilterCloseClick.bind(this),this.updateFilterSizeLabels=this.updateFilterSizeLabels.bind(this),this.filterHideColumns=this.filterHideColumns.bind(this),this.filterSetOffset=this.filterSetOffset.bind(this)}connectedCallback(){super.connectedCallback(),this.bindEventListeners()}disconnectedCallback(){super.disconnectedCallback(),this.bindEventListeners({unbind:!0}),window.cancelAnimationFrame(this.frame),window.clearTimeout(this.timeout)}firstUpdated(t){super.firstUpdated(t),this.onResize()}bindEventListeners(t){const{unbind:e=!1}=t||{},i=`${e?"remove":"add"}EventListener`;window[i]("resize",()=>{this.onResize()}),document[i]("click",r=>{const s=r.target;s.closest("[aria-controls]")||s.closest(".dropdown--open")||this.filterDropdownToggles.forEach(c=>{o.closeDropdown(c)})}),this.unitSelectors.forEach(r=>{r[i]("click",this.onUnitToggle)}),this.filterDropdownToggles.forEach(r=>{r[i]("click",this.onDropdownToggle)}),this.filterSizeOptions.forEach(r=>{r[i]("change",this.onSizeFilterChange)}),this.filterClose&&this.filterClose[i]("click",this.onFilterCloseClick)}update(t){super.update(t),t.has("activeSizeFilters")&&(this.updateFilterSizeLabels(),this.filterHideColumns(),this.onResize())}onResize(){this.filterDropdownToggles.forEach(e=>{var i;(i=e.parentElement)==null||i.style.setProperty("--offset-right",`${window.innerWidth-e.getBoundingClientRect().right}px`)}),this.stickyHeader&&this.style.setProperty("--sticky-header-height",`${this.stickyHeader.offsetHeight-1}px`),this.stickyMobileHeader&&this.style.setProperty("--sticky-mobile-header-height",`${this.stickyMobileHeader.offsetHeight}px`),this.filterSetOffset();const t=window.matchMedia("(max-width: 1023px)").matches;this.isMobile!==t&&(this.isMobile=t,t?this.stickyMobileHeader&&this.mainScrollableContainer&&(window.cancelAnimationFrame(this.frame),this.frame=window.requestAnimationFrame(this.onFrame)):window.cancelAnimationFrame(this.frame))}onUnitToggle(){const t=this.units==="imperial";this.units=t?"metric":"imperial"}onDropdownToggle(t){const e=t.currentTarget;if(this.timeout=window.setTimeout(()=>this.filterSetOffset(),b),this.filterDropdownToggles.forEach(i=>{i!==e&&o.closeDropdown(i)}),e.getAttribute("aria-expanded")==="true"){o.closeDropdown(e);return}o.openDropdown(e)}onSizeFilterChange(t){const e=t.currentTarget,i=e.value;if(!i)this.activeSizeFilters=[];else{const s=this.activeSizeFilters.filter(l=>l!==i);e.checked&&s.push(i),this.activeSizeFilters=s}const r=this.activeSizeFilters.length===0;this.filterSizeOptions.forEach(s=>{if(s.value===""&&(s.checked=r),s.value!==""&&r&&(s.checked=!1),s.value!==""&&!r){const l=this.activeSizeFilters.includes(s.value);s.checked=l}})}onFilterCloseClick(){this.filterDropdownToggles.forEach(t=>{o.closeDropdown(t)})}filterSetOffset(){this.filterNav&&this.style.setProperty("--filter-top-offset",`-${this.filterNav.offsetHeight+66}px`)}updateFilterSizeLabels(){const t=Array.from(this.filterSizeOptions).map(e=>e.checked?e.getAttribute("data-label"):"").filter((e,i,r)=>!!e&&r.indexOf(e)===i).join(", ");this.filterSizeLabels.forEach(e=>{e.textContent=t})}filterHideColumns(){const t=this.activeSizeFilters.length>0;this.columnCells.forEach(e=>{const i=e.getAttribute("data-col-id")||"",s=t&&!this.activeSizeFilters.includes(i)?"add":"remove";e.classList[s]("hidden")})}static closeDropdown(t){const e=document.getElementById(t.getAttribute("aria-controls"));e&&(t.setAttribute("aria-expanded","false"),e.setAttribute("aria-hidden","true"),e.classList.remove("dropdown--open"))}static openDropdown(t){var i;const e=document.getElementById(t.getAttribute("aria-controls"));e&&(t.setAttribute("aria-expanded","true"),e.setAttribute("aria-hidden","false"),e.classList.add("dropdown--open"),(i=e.querySelector("a, button, input"))==null||i.focus())}};n([p({type:String,reflect:!0})],o.prototype,"units",2);n([m({hasChanged:(t,e)=>JSON.stringify(t)!==JSON.stringify(e)})],o.prototype,"activeSizeFilters",2);n([a("#compare-sticky-header")],o.prototype,"stickyHeader",2);n([h("[data-filter-size-label]")],o.prototype,"filterSizeLabels",2);n([a("#compare-filter-nav")],o.prototype,"filterNav",2);n([a("#compare-filter-close")],o.prototype,"filterClose",2);n([a("#compare-header")],o.prototype,"regularHeader",2);n([a("#compare-sticky-mobile-header")],o.prototype,"stickyMobileHeader",2);n([a("#main-compare-table-scroll-container")],o.prototype,"mainScrollableContainer",2);n([h('[name="unit-selector"]')],o.prototype,"unitSelectors",2);n([h("[aria-controls]")],o.prototype,"filterDropdownToggles",2);n([h('[name="filter-sizes"]')],o.prototype,"filterSizeOptions",2);n([h("[data-col-id]")],o.prototype,"columnCells",2);o=n([f("compare-table")],o);
