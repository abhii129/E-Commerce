import{S}from"./-store-geolocation.js";import{B as m}from"./chunk-BaseElement-CopzcQ-j.js";import{t as d}from"./chunk-custom-element-BhZVzxrc.js";import"./chunk-lit-element-B04JoW0t.js";import{r as f}from"./chunk-state-BZNsAlxZ.js";import{e as u}from"./chunk-query-Cgxy6PDT.js";import{r as h}from"./chunk-query-all-DYFTEN8Z.js";import"./chunk-property-Bc0RexEQ.js";import"./chunk-base-CShCMygk.js";var b=Object.defineProperty,p=Object.getOwnPropertyDescriptor,n=(e,t,o,r)=>{for(var s=r>1?void 0:r?p(t,o):t,i=e.length-1,l;i>=0;i--)(l=e[i])&&(s=(r?l(t,o,s):l(s))||s);return r&&s&&b(t,o,s),s};let a=class extends S{constructor(){super(),this.storeObjects=[],this.selectedStore=null}connectedCallback(){super.connectedCallback(),this.handleStoreChange=this.handleStoreChange.bind(this),this.storeObjects=Array.from(this.storeOptions).map(e=>({name:e.value,coords:[e.dataset.longitude??"0",e.dataset.latitude??"0"],href:e.dataset.href??""})),this.setInitialStore(),document.addEventListener("store-change",this.handleStoreChange)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("store-change",this.handleStoreChange)}updated(e){var t;super.updated(e),this.selectedStore&&this.setStoreTextContent(this.selectedStore),this.showCorrectFooterStore(),this.showCorrectMobileStore(),this.$emit("store-change-mobile",(t=this.selectedStore)==null?void 0:t.name)}async setInitialStore(){const e=await this.getClosestStoreInRadius(this.storeObjects);this.selectedStore=e}handleStoreChange(e){var s;const o=this.storeObjects.find(i=>i.name===e.detail.value)||this.storeObjects[0]||null;if(!o)return;const r=o.href;r&&(r.indexOf("https")>-1?(s=window.open(r,"_blank"))==null||s.focus():window.location.href=r)}setStoreTextContent(e){this.closestOrSelectedStoreElement&&(this.closestOrSelectedStoreElement.textContent=e.name,e.href&&this.closestOrSelectedStoreElement.setAttribute("href",e.href))}showCorrectFooterStore(){if(!this.selectedStore){console.warn("No selected store found");return}document.querySelectorAll("[data-footer-store]").forEach(t=>{var o;t.dataset.footerStore===((o=this.selectedStore)==null?void 0:o.name)?t.classList.remove("hidden"):t.classList.add("hidden")})}showCorrectMobileStore(){document.querySelectorAll("[data-mobile-store]").forEach(o=>{var r;o.dataset.mobileStore===((r=this.selectedStore)==null?void 0:r.name)?o.setAttribute("checked","true"):o.removeAttribute("checked")});const t=document.querySelector("mobile-store-locator [data-closest-or-selected-store]");if(t)if(this.selectedStore){t.classList.remove("hidden");const o=document.createTextNode(this.selectedStore.name||"");t.append(o),this.selectedStore.href&&t.setAttribute("href",this.selectedStore.href)}else{for(t.classList.add("hidden");t.firstChild;)t.removeChild(t.firstChild);t.removeAttribute("href")}}};n([u("[data-closest-or-selected-store]")],a.prototype,"closestOrSelectedStoreElement",2);n([h("option")],a.prototype,"storeOptions",2);n([f()],a.prototype,"selectedStore",2);a=n([d("store-locator")],a);let c=class extends m{constructor(){super()}connectedCallback(){super.connectedCallback(),this.handleStoreChange=this.handleStoreChange.bind(this),this.storeInputs.forEach(e=>{e.addEventListener("click",this.handleStoreChange)}),document.addEventListener("store-change-mobile",this.updateMobileStoreDropdown.bind(this))}disconnectedCallback(){super.disconnectedCallback(),this.storeInputs.forEach(e=>{e.removeEventListener("click",this.handleStoreChange)}),document.removeEventListener("store-change-mobile",this.updateMobileStoreDropdown)}handleStoreChange(e){const t=e.target;this.$emit("store-change",{value:t.value})}updateMobileStoreDropdown(e){const t=e.detail;this.storeInputs.forEach(o=>{o.dataset.mobileStore===t?(o.classList.add("text-t-foreground"),o.classList.remove("text-t-foreground-secondary")):(o.classList.remove("text-t-foreground"),o.classList.add("text-t-foreground-secondary"))})}};n([h("button[data-mobile-store]")],c.prototype,"storeInputs",2);c=n([d("mobile-store-locator")],c);
