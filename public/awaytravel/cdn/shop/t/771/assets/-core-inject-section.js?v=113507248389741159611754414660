import{a as l}from"./-core-load-intersecting.js";import{B as c}from"./chunk-BaseElement-CopzcQ-j.js";import{H as h}from"./chunk-HTMLUpdateUtility-Hp59CDcg.js";import{t as u}from"./chunk-custom-element-BhZVzxrc.js";import{n as o}from"./chunk-property-Bc0RexEQ.js";import{r as f}from"./chunk-state-BZNsAlxZ.js";import"./chunk-lit-element-B04JoW0t.js";import"./chunk-WithApiClient-mq4vOvoR.js";import"./chunk-index-CKJCYK2x.js";import"./chunk-firstFocusableElement-BqnhZP5g.js";var b=Object.defineProperty,d=Object.getOwnPropertyDescriptor,a=(t,e,p,s)=>{for(var r=s>1?void 0:s?d(e,p):e,n=t.length-1,m;n>=0;n--)(m=t[n])&&(r=(s?m(e,p,r):m(r))||r);return s&&r&&b(e,p,r),r};let i=class extends c{constructor(){super(...arguments),this.$htmlUpdateUtility=new h(this,["section-name","base-url","params","id"]),this.sectionName="",this._baseUrl="",this.params="",this.initialRender=!0}get baseurl(){var t,e;return this._baseUrl||((e=(t=window.Shopify)==null?void 0:t.routes)==null?void 0:e.root)||"/"}updated(t){super.updated(t),t.has("params")&&this.params!==t.get("params")&&this.params&&this.fetch()}get paramsObjectFromString(){const t=new URLSearchParams(this.params);return Object.fromEntries(t)}fetch(){this.$htmlUpdateUtility.fetchAndReplaceSectionId({renderRoot:this,sectionId:this.sectionName,baseUrl:this.baseurl,params:this.paramsObjectFromString,withCache:!0,forceReplaceAll:this.initialRender}).catch(console.warn).finally(()=>{this.initialRender=!1,l()})}};a([o({type:String,attribute:"section-name"})],i.prototype,"sectionName",2);a([o({type:String,attribute:"base-url"})],i.prototype,"_baseUrl",2);a([o({type:String})],i.prototype,"params",2);a([o({type:String})],i.prototype,"baseurl",1);a([f()],i.prototype,"initialRender",2);i=a([u("section-injection")],i);
