var Et=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var ct=(e,t,n)=>(Et(e,t,"read from private field"),n?n.call(e):t.get(e)),Ot=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Lt=(e,t,n,o)=>(Et(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n);import{F as Ut}from"./chunk-FormElement-1RsIGsWP.js";import{f as jt}from"./chunk-firstFocusableElement-BqnhZP5g.js";import{i as qt,E as Tt,x as H}from"./chunk-lit-element-B04JoW0t.js";import{n as E}from"./chunk-property-Bc0RexEQ.js";import{r as Gt}from"./chunk-state-BZNsAlxZ.js";import{e as _t,n as At}from"./chunk-ref-7xufm7YO.js";import{o as St}from"./chunk-unsafe-html-fDgEVXYA.js";import"./chunk-BaseElement-CopzcQ-j.js";import"./chunk-directive-C_Rw-dL6.js";var Q;class Kt{constructor(t,n){Ot(this,Q,[]);(this.host=t).addController(this),this.mediaQuery=window.matchMedia(n),this.onMediaQueryChange=this.onMediaQueryChange.bind(this)}addOnChangeCallback(t){ct(this,Q).push(t)}hostConnected(){this.mediaQuery.addEventListener("change",this.onMediaQueryChange)}hostDisconnected(){this.mediaQuery.removeEventListener("change",this.onMediaQueryChange),Lt(this,Q,[])}get active(){return this.mediaQuery.matches}async onMediaQueryChange(){await this.host.updateComplete,this.host.requestUpdate(),ct(this,Q).forEach(t=>t())}}Q=new WeakMap;const ft=Math.min,W=Math.max,et=Math.round,tt=Math.floor,S=e=>({x:e,y:e}),Xt={left:"right",right:"left",bottom:"top",top:"bottom"},Yt={start:"end",end:"start"};function pt(e,t){return typeof e=="function"?e(t):e}function z(e){return e.split("-")[0]}function it(e){return e.split("-")[1]}function Jt(e){return e==="x"?"y":"x"}function Mt(e){return e==="y"?"height":"width"}function X(e){return["top","bottom"].includes(z(e))?"y":"x"}function Pt(e){return Jt(X(e))}function Zt(e,t,n){n===void 0&&(n=!1);const o=it(e),i=Pt(e),r=Mt(i);let s=i==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(s=nt(s)),[s,nt(s)]}function te(e){const t=nt(e);return[dt(e),t,dt(t)]}function dt(e){return e.replace(/start|end/g,t=>Yt[t])}function ee(e,t,n){const o=["left","right"],i=["right","left"],r=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:o:t?o:i;case"left":case"right":return t?r:s;default:return[]}}function ne(e,t,n,o){const i=it(e);let r=ee(z(e),n==="start",o);return i&&(r=r.map(s=>s+"-"+i),t&&(r=r.concat(r.map(dt)))),r}function nt(e){return e.replace(/left|right|bottom|top/g,t=>Xt[t])}function oe(e){return{top:0,right:0,bottom:0,left:0,...e}}function ie(e){return typeof e!="number"?oe(e):{top:e,right:e,bottom:e,left:e}}function ot(e){const{x:t,y:n,width:o,height:i}=e;return{width:o,height:i,top:n,left:t,right:t+o,bottom:n+i,x:t,y:n}}function kt(e,t,n){let{reference:o,floating:i}=e;const r=X(t),s=Pt(t),l=Mt(s),a=z(t),c=r==="y",d=o.x+o.width/2-i.width/2,u=o.y+o.height/2-i.height/2,h=o[l]/2-i[l]/2;let f;switch(a){case"top":f={x:d,y:o.y-i.height};break;case"bottom":f={x:d,y:o.y+o.height};break;case"right":f={x:o.x+o.width,y:u};break;case"left":f={x:o.x-i.width,y:u};break;default:f={x:o.x,y:o.y}}switch(it(t)){case"start":f[s]-=h*(n&&c?-1:1);break;case"end":f[s]+=h*(n&&c?-1:1);break}return f}const se=async(e,t,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:r=[],platform:s}=n,l=r.filter(Boolean),a=await(s.isRTL==null?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:u}=kt(c,o,a),h=o,f={},p=0;for(let g=0;g<l.length;g++){const{name:b,fn:m}=l[g],{x,y:v,data:O,reset:y}=await m({x:d,y:u,initialPlacement:o,placement:h,strategy:i,middlewareData:f,rects:c,platform:s,elements:{reference:e,floating:t}});d=x??d,u=v??u,f={...f,[b]:{...f[b],...O}},y&&p<=50&&(p++,typeof y=="object"&&(y.placement&&(h=y.placement),y.rects&&(c=y.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):y.rects),{x:d,y:u}=kt(c,h,a)),g=-1)}return{x:d,y:u,placement:h,strategy:i,middlewareData:f}};async function re(e,t){var n;t===void 0&&(t={});const{x:o,y:i,platform:r,rects:s,elements:l,strategy:a}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:f=0}=pt(t,e),p=ie(f),b=l[h?u==="floating"?"reference":"floating":u],m=ot(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(b)))==null||n?b:b.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:c,rootBoundary:d,strategy:a})),x=u==="floating"?{x:o,y:i,width:s.floating.width,height:s.floating.height}:s.reference,v=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),O=await(r.isElement==null?void 0:r.isElement(v))?await(r.getScale==null?void 0:r.getScale(v))||{x:1,y:1}:{x:1,y:1},y=ot(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:v,strategy:a}):x);return{top:(m.top-y.top+p.top)/O.y,bottom:(y.bottom-m.bottom+p.bottom)/O.y,left:(m.left-y.left+p.left)/O.x,right:(y.right-m.right+p.right)/O.x}}const le=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:i,middlewareData:r,rects:s,initialPlacement:l,platform:a,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...b}=pt(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const m=z(i),x=X(l),v=z(l)===l,O=await(a.isRTL==null?void 0:a.isRTL(c.floating)),y=h||(v||!g?[nt(l)]:te(l)),q=p!=="none";!h&&q&&y.push(...ne(l,g,p,O));const F=[l,...y],at=await re(t,b),Z=[];let G=((o=r.flip)==null?void 0:o.overflows)||[];if(d&&Z.push(at[m]),u){const P=Zt(i,s,O);Z.push(at[P[0]],at[P[1]])}if(G=[...G,{placement:i,overflows:Z}],!Z.every(P=>P<=0)){var xt,wt;const P=(((xt=r.flip)==null?void 0:xt.index)||0)+1,Ct=F[P];if(Ct)return{data:{index:P,overflows:G},reset:{placement:Ct}};let K=(wt=G.filter(B=>B.overflows[0]<=0).sort((B,R)=>B.overflows[1]-R.overflows[1])[0])==null?void 0:wt.placement;if(!K)switch(f){case"bestFit":{var vt;const B=(vt=G.filter(R=>{if(q){const D=X(R.placement);return D===x||D==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(D=>D>0).reduce((D,zt)=>D+zt,0)]).sort((R,D)=>R[1]-D[1])[0])==null?void 0:vt[0];B&&(K=B);break}case"initialPlacement":K=l;break}if(i!==K)return{reset:{placement:K}}}return{}}}};async function ae(e,t){const{placement:n,platform:o,elements:i}=e,r=await(o.isRTL==null?void 0:o.isRTL(i.floating)),s=z(n),l=it(n),a=X(n)==="y",c=["left","top"].includes(s)?-1:1,d=r&&a?-1:1,u=pt(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&typeof p=="number"&&(f=l==="end"?p*-1:p),a?{x:f*d,y:h*c}:{x:h*c,y:f*d}}const ce=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:i,y:r,placement:s,middlewareData:l}=t,a=await ae(t,e);return s===((n=l.offset)==null?void 0:n.placement)&&(o=l.arrow)!=null&&o.alignmentOffset?{}:{x:i+a.x,y:r+a.y,data:{...a,placement:s}}}}};function st(){return typeof window<"u"}function j(e){return Nt(e)?(e.nodeName||"").toLowerCase():"#document"}function L(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function $(e){var t;return(t=(Nt(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Nt(e){return st()?e instanceof Node||e instanceof L(e).Node:!1}function T(e){return st()?e instanceof Element||e instanceof L(e).Element:!1}function k(e){return st()?e instanceof HTMLElement||e instanceof L(e).HTMLElement:!1}function $t(e){return!st()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof L(e).ShadowRoot}function J(e){const{overflow:t,overflowX:n,overflowY:o,display:i}=_(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(i)}function ue(e){return["table","td","th"].includes(j(e))}function rt(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function mt(e){const t=gt(),n=T(e)?_(e):e;return["transform","translate","scale","rotate","perspective"].some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function fe(e){let t=M(e);for(;k(t)&&!U(t);){if(mt(t))return t;if(rt(t))return null;t=M(t)}return null}function gt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function U(e){return["html","body","#document"].includes(j(e))}function _(e){return L(e).getComputedStyle(e)}function lt(e){return T(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function M(e){if(j(e)==="html")return e;const t=e.assignedSlot||e.parentNode||$t(e)&&e.host||$(e);return $t(t)?t.host:t}function Ft(e){const t=M(e);return U(t)?e.ownerDocument?e.ownerDocument.body:e.body:k(t)&&J(t)?t:Ft(t)}function Y(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Ft(e),r=i===((o=e.ownerDocument)==null?void 0:o.body),s=L(i);if(r){const l=ht(s);return t.concat(s,s.visualViewport||[],J(i)?i:[],l&&n?Y(l):[])}return t.concat(i,Y(i,[],n))}function ht(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Bt(e){const t=_(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const i=k(e),r=i?e.offsetWidth:n,s=i?e.offsetHeight:o,l=et(n)!==r||et(o)!==s;return l&&(n=r,o=s),{width:n,height:o,$:l}}function bt(e){return T(e)?e:e.contextElement}function I(e){const t=bt(e);if(!k(t))return S(1);const n=t.getBoundingClientRect(),{width:o,height:i,$:r}=Bt(t);let s=(r?et(n.width):n.width)/o,l=(r?et(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!l||!Number.isFinite(l))&&(l=1),{x:s,y:l}}const de=S(0);function Ht(e){const t=L(e);return!gt()||!t.visualViewport?de:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function he(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==L(e)?!1:t}function N(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=bt(e);let s=S(1);t&&(o?T(o)&&(s=I(o)):s=I(e));const l=he(r,n,o)?Ht(r):S(0);let a=(i.left+l.x)/s.x,c=(i.top+l.y)/s.y,d=i.width/s.x,u=i.height/s.y;if(r){const h=L(r),f=o&&T(o)?L(o):o;let p=h,g=ht(p);for(;g&&o&&f!==p;){const b=I(g),m=g.getBoundingClientRect(),x=_(g),v=m.left+(g.clientLeft+parseFloat(x.paddingLeft))*b.x,O=m.top+(g.clientTop+parseFloat(x.paddingTop))*b.y;a*=b.x,c*=b.y,d*=b.x,u*=b.y,a+=v,c+=O,p=L(g),g=ht(p)}}return ot({width:d,height:u,x:a,y:c})}function yt(e,t){const n=lt(e).scrollLeft;return t?t.left+n:N($(e)).left+n}function Vt(e,t,n){n===void 0&&(n=!1);const o=e.getBoundingClientRect(),i=o.left+t.scrollLeft-(n?0:yt(e,o)),r=o.top+t.scrollTop;return{x:i,y:r}}function pe(e){let{elements:t,rect:n,offsetParent:o,strategy:i}=e;const r=i==="fixed",s=$(o),l=t?rt(t.floating):!1;if(o===s||l&&r)return n;let a={scrollLeft:0,scrollTop:0},c=S(1);const d=S(0),u=k(o);if((u||!u&&!r)&&((j(o)!=="body"||J(s))&&(a=lt(o)),k(o))){const f=N(o);c=I(o),d.x=f.x+o.clientLeft,d.y=f.y+o.clientTop}const h=s&&!u&&!r?Vt(s,a,!0):S(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-a.scrollLeft*c.x+d.x+h.x,y:n.y*c.y-a.scrollTop*c.y+d.y+h.y}}function me(e){return Array.from(e.getClientRects())}function ge(e){const t=$(e),n=lt(e),o=e.ownerDocument.body,i=W(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),r=W(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let s=-n.scrollLeft+yt(e);const l=-n.scrollTop;return _(o).direction==="rtl"&&(s+=W(t.clientWidth,o.clientWidth)-i),{width:i,height:r,x:s,y:l}}function be(e,t){const n=L(e),o=$(e),i=n.visualViewport;let r=o.clientWidth,s=o.clientHeight,l=0,a=0;if(i){r=i.width,s=i.height;const c=gt();(!c||c&&t==="fixed")&&(l=i.offsetLeft,a=i.offsetTop)}return{width:r,height:s,x:l,y:a}}function ye(e,t){const n=N(e,!0,t==="fixed"),o=n.top+e.clientTop,i=n.left+e.clientLeft,r=k(e)?I(e):S(1),s=e.clientWidth*r.x,l=e.clientHeight*r.y,a=i*r.x,c=o*r.y;return{width:s,height:l,x:a,y:c}}function Rt(e,t,n){let o;if(t==="viewport")o=be(e,n);else if(t==="document")o=ge($(e));else if(T(t))o=ye(t,n);else{const i=Ht(e);o={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return ot(o)}function Wt(e,t){const n=M(e);return n===t||!T(n)||U(n)?!1:_(n).position==="fixed"||Wt(n,t)}function xe(e,t){const n=t.get(e);if(n)return n;let o=Y(e,[],!1).filter(l=>T(l)&&j(l)!=="body"),i=null;const r=_(e).position==="fixed";let s=r?M(e):e;for(;T(s)&&!U(s);){const l=_(s),a=mt(s);!a&&l.position==="fixed"&&(i=null),(r?!a&&!i:!a&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||J(s)&&!a&&Wt(e,s))?o=o.filter(d=>d!==s):i=l,s=M(s)}return t.set(e,o),o}function we(e){let{element:t,boundary:n,rootBoundary:o,strategy:i}=e;const s=[...n==="clippingAncestors"?rt(t)?[]:xe(t,this._c):[].concat(n),o],l=s[0],a=s.reduce((c,d)=>{const u=Rt(t,d,i);return c.top=W(u.top,c.top),c.right=ft(u.right,c.right),c.bottom=ft(u.bottom,c.bottom),c.left=W(u.left,c.left),c},Rt(t,l,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function ve(e){const{width:t,height:n}=Bt(e);return{width:t,height:n}}function Ce(e,t,n){const o=k(t),i=$(t),r=n==="fixed",s=N(e,!0,r,t);let l={scrollLeft:0,scrollTop:0};const a=S(0);if(o||!o&&!r)if((j(t)!=="body"||J(i))&&(l=lt(t)),o){const h=N(t,!0,r,t);a.x=h.x+t.clientLeft,a.y=h.y+t.clientTop}else i&&(a.x=yt(i));const c=i&&!o&&!r?Vt(i,l):S(0),d=s.left+l.scrollLeft-a.x-c.x,u=s.top+l.scrollTop-a.y-c.y;return{x:d,y:u,width:s.width,height:s.height}}function ut(e){return _(e).position==="static"}function Dt(e,t){if(!k(e)||_(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return $(e)===n&&(n=n.ownerDocument.body),n}function It(e,t){const n=L(e);if(rt(e))return n;if(!k(e)){let i=M(e);for(;i&&!U(i);){if(T(i)&&!ut(i))return i;i=M(i)}return n}let o=Dt(e,t);for(;o&&ue(o)&&ut(o);)o=Dt(o,t);return o&&U(o)&&ut(o)&&!mt(o)?n:o||fe(e)||n}const Ee=async function(e){const t=this.getOffsetParent||It,n=this.getDimensions,o=await n(e.floating);return{reference:Ce(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function Oe(e){return _(e).direction==="rtl"}const Le={convertOffsetParentRelativeRectToViewportRelativeRect:pe,getDocumentElement:$,getClippingRect:we,getOffsetParent:It,getElementRects:Ee,getClientRects:me,getDimensions:ve,getScale:I,isElement:T,isRTL:Oe};function Qt(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Te(e,t){let n=null,o;const i=$(e);function r(){var l;clearTimeout(o),(l=n)==null||l.disconnect(),n=null}function s(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),r();const c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:f}=c;if(l||t(),!h||!f)return;const p=tt(u),g=tt(i.clientWidth-(d+h)),b=tt(i.clientHeight-(u+f)),m=tt(d),v={rootMargin:-p+"px "+-g+"px "+-b+"px "+-m+"px",threshold:W(0,ft(1,a))||1};let O=!0;function y(q){const F=q[0].intersectionRatio;if(F!==a){if(!O)return s();F?s(!1,F):o=setTimeout(()=>{s(!1,1e-7)},1e3)}F===1&&!Qt(c,e.getBoundingClientRect())&&s(),O=!1}try{n=new IntersectionObserver(y,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(y,v)}n.observe(e)}return s(!0),r}function _e(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=o,c=bt(e),d=i||r?[...c?Y(c):[],...Y(t)]:[];d.forEach(m=>{i&&m.addEventListener("scroll",n,{passive:!0}),r&&m.addEventListener("resize",n)});const u=c&&l?Te(c,n):null;let h=-1,f=null;s&&(f=new ResizeObserver(m=>{let[x]=m;x&&x.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var v;(v=f)==null||v.observe(t)})),n()}),c&&!a&&f.observe(c),f.observe(t));let p,g=a?N(e):null;a&&b();function b(){const m=N(e);g&&!Qt(g,m)&&n(),g=m,p=requestAnimationFrame(b)}return n(),()=>{var m;d.forEach(x=>{i&&x.removeEventListener("scroll",n),r&&x.removeEventListener("resize",n)}),u==null||u(),(m=f)==null||m.disconnect(),f=null,a&&cancelAnimationFrame(p)}}const Ae=ce,Se=le,ke=(e,t,n)=>{const o=new Map,i={platform:Le,...n},r={...i.platform,_c:o};return se(e,t,{...i,platform:r})};/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*$e(e,t){if(e!==void 0){let n=0;for(const o of e)yield t(o,n++)}}var Re=Object.defineProperty,C=(e,t,n,o)=>{for(var i=void 0,r=e.length-1,s;r>=0;r--)(s=e[r])&&(i=s(t,n,i)||i);return i&&Re(t,n,i),i},A;const w=(A=class extends Ut{constructor(){super(),this.mediaQueryUtility=new Kt(this,A.CUSTOM_SELECT_BREAKPOINT),this.label="",this.placeholder="Select an option",this.alwaysShowPlaceholder=!1,this.error=!1,this._options=[],this.helpText="",this.errorText="",this.labelClass="",this.toggleClass="",this.toggleIconClass="",this.dropdownClass="",this.ariaLabel="",this.truncate=!0,this.open=!1,this.useCustomSelectOnMobile=!1,this._expanded=!1,this.toggleElement=_t(),this.listboxElement=_t(),this._cleanupWatcher=null,this._handleDocumentClick=this._handleDocumentClick.bind(this),this._handleDocumentKeyDown=this._handleDocumentKeyDown.bind(this),this.handleOpenDropdowns=this.handleOpenDropdowns.bind(this),this._handleClick=this._handleClick.bind(this),this._collectionDataFromChildren()}_collectionDataFromChildren(){const t=Array.from(this.querySelectorAll("option"));t.length!==0&&(this._options=t.map(n=>({label:n.textContent||"",value:n.value||"",el:n})))}connectedCallback(){super.connectedCallback(),this.useCustomSelectOnMobile||(this.mediaQueryUtility.addOnChangeCallback(()=>this._onMediaQueryChange()),this._onMediaQueryChange())}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("click",this._handleDocumentClick),document.removeEventListener("keydown",this._handleDocumentKeyDown)}_handleDocumentClick(t){if(!(this.contains(t.target)||this.renderRoot.contains(t.target))){this._expanded=!1,this.open=!1;return}}_onMediaQueryChange(){const t=this.querySelector("select");this.mediaQueryUtility.active&&!this.multiple?t==null||t.setAttribute("form","form-random"+Math.random()):t==null||t.removeAttribute("form")}_handleClick(t){if(!this._expanded)return;const n=this.listboxElement.value,o=t.target;if(!n||!o||!n.contains(o))return;const i=o.tagName==="BUTTON"?o:o.closest("button");i&&(i.disabled||(this.selectValue(i.value),this.multiple||(this._expanded=!1,this.open=!1)))}selectValue(t){const n=this.querySelector("select");if(n&&(n.value=t,n.setAttribute("value",t),n.childNodes.forEach(o=>{o instanceof HTMLOptionElement&&(o.selected=o.value===t,o.selected?o.setAttribute("selected",""):o.removeAttribute("selected"))})),this.multiple){const o=new Set(this.parsedValue);o.has(t)?o.delete(t):o.add(t),this.value=Array.from(o).filter(Boolean).join(",")}else this.value=t;this.id=="store"&&this.$emit("store-change",{value:this.value}),this.id=="store-locator-section"&&this.$emit("store-location-section-change",{value:this.value})}get currentActiveElement(){return this.renderRoot instanceof ShadowRoot?this.renderRoot.activeElement:document.activeElement}_handleDocumentKeyDown(t){var n;if(this._expanded&&(t.key==="Escape"&&(this._expanded=!1,this.open=!1,(n=this.toggleElement.value)==null||n.focus()),t.key==="ArrowUp"||t.key==="ArrowDown")){t.preventDefault();const o=this.listboxElement.value;if(!o)return;const i=Array.from(o.querySelectorAll("button")),r=this.currentActiveElement,s=i.findIndex(a=>a===r);if(s===-1){i[0].focus();return}const l=t.key==="ArrowUp"?s-1:s+1;if(l<0)return i[i.length-1].focus();if(l>=i.length)return i[0].focus();i[l].focus()}}_handleToggleClick(){this._expanded=!this._expanded,this.open=this._expanded}updated(t){super.updated(t),t.has("_expanded")&&typeof t.get("_expanded")=="boolean"&&this._handleExpandedStateChange()}_positionListbox(t,n){ke(t,n,{placement:"bottom-start",strategy:"absolute",middleware:[Ae(5),Se({crossAxis:!1,fallbackPlacements:["top-start","bottom-start"],fallbackAxisSideDirection:"start"})]}).then(({x:o,y:i})=>{this.id=="store"&&this.value==""?Object.assign(n.style,{left:"auto",right:"0px",top:`${i}px`}):Object.assign(n.style,{left:`${this.id=="SortBy-desktop"?o-50:o}px`,top:`${i}px`})})}handleOpenDropdowns(){this._expanded=!1,this.open=!1}async _handleExpandedStateChange(){var o;if((o=this._cleanupWatcher)==null||o.call(this),await this.updateComplete,!this._expanded){document.removeEventListener("click",this._handleDocumentClick),document.removeEventListener("keydown",this._handleDocumentKeyDown),document.removeEventListener("scroll",this.handleOpenDropdowns);return}document.addEventListener("click",this._handleDocumentClick),document.addEventListener("keydown",this._handleDocumentKeyDown),document.addEventListener("scroll",this.handleOpenDropdowns);const t=this.toggleElement.value,n=this.listboxElement.value;!t||!n||(this._cleanupWatcher=_e(t,n,()=>this._positionListbox(t,n)),this._onExpanded())}_onCollapsed(){var t;(t=this.toggleElement.value)==null||t.focus(),this.$emit(A.EVENTS.CLOSE,{value:this.value})}_onExpanded(){setTimeout(()=>{var t;this.listboxElement.value&&((t=jt(this.listboxElement.value))==null||t.focus({focusVisible:!1}))},100),this.$emit(A.EVENTS.OPEN,{value:this.value})}get _processedOptions(){const t=this._options,n=this.parsedValue;return t.map(o=>({...o,selected:this.multiple&&Array.isArray(n)?n.includes(o.value):o.value===n}))}get parsedValue(){return this.multiple?String(this.value).split(","):this.value}get idForToggle(){return`${this.id}-toggle`}get idForListbox(){return`${this.id}-listbox`}get helpTextHTML(){return this.helpText?H`
      <p id="${this.id}_text" class=${V.HELP_TEXT}>
        ${this.helpText}
      </p>
    `:Tt}get labelHTML(){return H`
      <label
        for="${this.idForToggle}"
        class="${V.LABEL} ${this.labelClass}"
      >
        ${this.label}
      </label>
    `}getDropdownItemHTML(t){return H`
      <button
        type="button"
        class=${V.DROPDOWN_ITEM}
        role="option"
        aria-selected="${t.selected}"
        value="${t.value}"
        ?selected=${t.selected}
        ?disabled=${t.disabled}
        aria-labelledby="${t.label}"
        data-track-click="${t.el.dataset.trackClick||""}"
        data-track-properties="${t.el.dataset.trackProperties||""}"
      >
        <span class="flex items-center gap-xs"
          >${St(this.renderOptionLabel(t.label,t))}</span
        >
      </button>
    `}renderOptionLabel(t,n){const o=n.el.dataset.icon||"",i=this.escapeHtml(t);return`${o} ${i}`}get hasSelectedOption(){return this._processedOptions.some(t=>t.selected)}get _currentToggleLabel(){if(this.alwaysShowPlaceholder||!this.hasSelectedOption)return this.placeholder;const t=this._processedOptions;if(this.multiple)return t.filter(i=>i.selected).map(i=>i.label).join(", ");const n=t.find(o=>o.selected);return n?this.renderOptionLabel(n.label,n):this.placeholder}escapeHtml(t){const n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,o=>n[o])}get getCustomSelectHTML(){return H`
      <div
        class="group peer relative w-full"
        ?error=${this.error}
        ?open=${this._expanded}
        @click=${this._handleClick}
      >
        <button
          ${At(this.toggleElement)}
          type="button"
          role="combobox"
          @click=${this._handleToggleClick}
          aria-haspopup="listbox"
          class="relative"
          id="${this.idForToggle}"
          value="${this.value}"
          aria-controls="${this.idForListbox}"
          aria-expanded="${this._expanded}"
          aria-disabled="${this.disabled}"
          aria-label="${this.ariaLabel}"
          ?disabled=${this.disabled}
          ${this.helpText?`aria-describedby="${this.id}_text"`:""}
          class="${V.TOGGLE} ${this.toggleClass}"
        >
          <span
            class="${this.truncate?"truncate":"text-balance"} flex items-center gap-xs"
            >${St(this._currentToggleLabel)}</span
          >
          <div class="${V.TOGGLE_ICON} ${this.toggleIconClass}">
            <svg-icon
              src="icon-select-arrow"
              class="block"
              style="font-size: 12px;"
            ></svg-icon>
          </div>
        </button>

        <div
          ${At(this.listboxElement)}
          id="dropdown"
          role="listbox"
          id="${this.idForListbox}"
          ?inert=${!this._expanded}
          class="${V.DROPDOWN} ${this.dropdownClass}"
          ${this.multiple?'aria-multiselectable="true"':""}
        >
          ${$e(this._processedOptions,t=>this.getDropdownItemHTML(t))}
        </div>
        ${this.labelHTML}
      </div>
      ${this.helpTextHTML}
    `}get getNativeSelectHTML(){return H`<slot></slot>`}getSelectedOptionByValue(t){return this._options.find(n=>n.value===t)}render(){return!Array.isArray(this._options)||this._options.length===0?H`${Tt}`:this.useCustomSelectOnMobile?this.getCustomSelectHTML:this.mediaQueryUtility.active||this.multiple?this.getCustomSelectHTML:this.getNativeSelectHTML}},A.EVENTS={OPEN:"open",CLOSE:"close"},A.styles=[qt`
      @starting-style {
        .custom-select__dropdown {
          opacity: 0 !important;
          transform: translateY(2rem) !important;
        }
      }
    `],A.CUSTOM_SELECT_BREAKPOINT="(min-width: 1024px)",A);C([E({type:String})],w.prototype,"label");C([E({type:String})],w.prototype,"placeholder");C([E({type:Boolean,attribute:"always-show-placeholder"})],w.prototype,"alwaysShowPlaceholder");C([E({type:Boolean})],w.prototype,"error");C([E({type:Array,attribute:"options"})],w.prototype,"_options");C([E({type:String})],w.prototype,"helpText");C([E({type:String})],w.prototype,"errorText");C([E({type:String,attribute:"label-class"})],w.prototype,"labelClass");C([E({type:String,attribute:"toggle-class"})],w.prototype,"toggleClass");C([E({type:String,attribute:"icon-class"})],w.prototype,"toggleIconClass");C([E({type:String,attribute:"dropdown-class"})],w.prototype,"dropdownClass");C([E({type:String,attribute:"aria-label"})],w.prototype,"ariaLabel");C([E({type:Boolean,attribute:"truncate",converter:e=>e==="true"})],w.prototype,"truncate");C([E({type:Boolean,reflect:!0,attribute:"open"})],w.prototype,"open");C([E({type:Boolean,attribute:"use-custom-select-on-mobile"})],w.prototype,"useCustomSelectOnMobile");C([Gt()],w.prototype,"_expanded");let De=w;customElements.get("custom-select")||customElements.define("custom-select",De);const V={TOGGLE:"text-left flex items-center gap-2xs w-full appearance-none outline-0 outline-offset-0 text-t-foreground disabled:text-t-border body-small disabled:border-t-border focus:outline-0 outline-offset-0 focus:ring-0 focus:border-t-foreground peer group-[[error]]:ring-u-error group-[[error]]:border-[transparent] group-[[error]]:ring-2 focus-visible:ring-2 focus-visible:ring-u-focus",TOGGLE_ICON:"flex items-center w-icon-sizesm h-icon-sizesm pointer-events-none text-t-foreground group-[[error]]:text-u-error group-[[open]]:rotate-180 transition-transform",LABEL:"absolute caption text-t-foreground-secondary outline-0 outline-offset-0 duration-300 transform -translate-y-2.5 scale-75 top-3.5 start-sm-forms-padding lg:start-sm-forms-padding z-10 origin-[0] peer-focus:text-t-foreground peer-disabled:text-t-border peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-2.5 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto",HELP_TEXT:"caption text-t-foreground-secondary start-sm-forms-padding lg:start-sm-forms-padding",DROPDOWN:"custom-select__dropdown -mx-xs outline-0 outline-offset-0 min-w-max max-h-[50vh] overflow-y-auto overflow-x-clip scrollbar-thin scrollbar-track-[transparent] scrollbar-thumb-p-neutral absolute z-20 hidden top-full left-0 w-full border border-t-border bg-t-background drop-shadow-md group-[[open]]:grid translate-y-4 opacity-0 transition-[opacity,display,transform] [transition-behavior:allow-discrete] motion-reduce:transition-none duration-300 group-[[open]]:translate-y-0 group-[[open]]:opacity-100 !motion-reduce:group-[[open]]:transition-none",DROPDOWN_ITEM:"px-forms-padding group block ring-0 focus:ring-0 appearance-none outline-0 outline-offset-0 py-xs bg-t-background body-small disabled:text-t-disabled text-t-foreground-secondary [&[selected]]:text-t-foreground [&[selected]]:bg-t-brand-secondary focus-visible:ring-2 focus-visible:ring-u-focus focus-visible:z-[1] hover:text-t-foreground [&:disabled]:hover:text-t-disabled text-left border-b border-t-foreground-secondary last:border-b-0 border-solid"};
