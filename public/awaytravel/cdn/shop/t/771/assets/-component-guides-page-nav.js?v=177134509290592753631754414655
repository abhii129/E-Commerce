import{B as v}from"./chunk-BaseElement-CopzcQ-j.js";import{t as b}from"./chunk-custom-element-BhZVzxrc.js";import"./chunk-lit-element-B04JoW0t.js";import{e as f}from"./chunk-query-Cgxy6PDT.js";import{r as u}from"./chunk-query-all-DYFTEN8Z.js";import"./chunk-base-CShCMygk.js";var p=Object.defineProperty,m=Object.getOwnPropertyDescriptor,h=(i,e,t,s)=>{for(var n=s>1?void 0:s?m(e,t):e,o=i.length-1,r;o>=0;o--)(r=i[o])&&(n=(s?r(e,t,n):r(n))||n);return s&&n&&p(e,t,n),n};let c=class extends v{constructor(){super(),this.observer=null,this.disableObservation=!1,this.onLinkClick=this.onLinkClick.bind(this),this.observeIntersection=this.observeIntersection.bind(this),this.updateActiveLink=this.updateActiveLink.bind(this)}connectedCallback(){super.connectedCallback(),this.bindLinks(),this.initSectionsObserver(),this.updateActiveLink(window.location.hash.slice(1)||"")}disconnectedCallback(){var i;super.disconnectedCallback(),(i=this.observer)==null||i.disconnect(),this.bindLinks({unbind:!0})}bindLinks(i){const{unbind:e=!1}=i||{},t=`${e?"remove":"add"}EventListener`;this.links.forEach(s=>{s[t]("click",this.onLinkClick)})}onLinkClick(i){var l;i.preventDefault();const e=i.currentTarget.getAttribute("href"),t=e==null?void 0:e.slice(1),s=document.getElementById(t||"");if(!(t&&s))return;this.disableObservation=!0,setTimeout(()=>{this.disableObservation=!1},1e3),this.updateActiveLink(t);const n=new URL(window.location.href);n.hash=t,window.history.replaceState({},"",n.toString());const o=this.container.offsetHeight||0,r=s.getBoundingClientRect().top;let a=r+window.scrollY;if(r>0)a-=o;else{const d=((l=document.getElementById("main-header"))==null?void 0:l.offsetHeight)||0;a-=o+d}window.scrollTo({top:a,behavior:"smooth"})}initSectionsObserver(){const i=Array.from(this.links).map(e=>{var t;return(t=e.getAttribute("href"))==null?void 0:t.slice(1)});this.observer=new IntersectionObserver(this.observeIntersection,{rootMargin:"-50% 0% -50% 0%",threshold:0}),i.forEach(e=>{var s;const t=document.getElementById(e||"");t&&((s=this.observer)==null||s.observe(t))})}observeIntersection(i){if(this.disableObservation)return;let e="";i.forEach(t=>{t.isIntersecting&&(e=t.target.id)}),this.updateActiveLink(e)}updateActiveLink(i){i||this.links.forEach(e=>{e.classList.remove("active")}),this.links.forEach(e=>{const s=e.getAttribute("href")===`#${i}`;e.classList.toggle("active",s),s&&this.container.scrollTo({behavior:"smooth",left:e.offsetLeft-(window.innerWidth-e.clientWidth)/2})})}};h([u("a")],c.prototype,"links",2);h([f("div")],c.prototype,"container",2);c=h([b("guides-page-nav")],c);
